{
  "name": "devcontAIner",
  "build": {
    "context": "..",
    "dockerfile": "../docker/devcontainer/Dockerfile"
  },
  "features": {
    "ghcr.io/devcontainers/features/docker-outside-of-docker:1": {
      "moby": false
    },
    "ghcr.io/devcontainers/features/node:1": { 
      "version": "25" 
    },
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/python:1": {},
    "ghcr.io/devcontainers-extra/features/bun:1": {},
    "ghcr.io/devcontainers-extra/features/claude-code:1": {},
    "ghcr.io/stu-bell/devcontainer-features/gemini-cli:0": {},
    "ghcr.io/schlich/devcontainer-features/playwright:0": {},
    "ghcr.io/jungaretti/features/ripgrep:1": {},
    "ghcr.io/jsburckhardt/devcontainer-features/bat:1": {},
    "ghcr.io/jsburckhardt/devcontainer-features/uv:1": {},
    "ghcr.io/devcontainers-extra/features/fzf:1": {},
    "ghcr.io/eitsupi/devcontainer-features/jq-likes:2": {},
    "ghcr.io/devcontainers-extra/features/eza:1": {}
  },
  "mounts": [
    {
      "source": "${localEnv:HOME}/.claude",
      "target": "/home/vscode/.claude",
      "type": "bind"
    },
    {
      "source": "${localEnv:HOME}/.gitconfig",
      "target": "/home/vscode/.gitconfig",
      "type": "bind",
      "consistency": "cached"
    },
    {
      "source": "${localEnv:HOME}/.ssh",
      "target": "/home/vscode/.ssh",
      "type": "bind",
      "consistency": "cached"
    },
    {
      "source": "${localEnv:HOME}/.1password/agent.sock",
      "target": "/home/vscode/.1password/agent.sock",
      "type": "bind"
    },
    {
      "source": "/usr/local/bin/awf",
      "target": "/usr/local/bin/awf",
      "type": "bind",
      "readonly": true
    },
    {
      "source": "${localEnv:HOME}/.config/awf",
      "target": "/home/vscode/.config/awf",
      "type": "bind"
    },
    {
      "source": "${localEnv:HOME}/.local/share/awf",
      "target": "/home/vscode/.local/share/awf",
      "type": "bind"
    },
    {
      "source": "${localEnv:HOME}/.gemini",
      "target": "/home/vscode/.gemini",
      "type": "bind"
    },
    {
      "source": "${localEnv:HOME}/.claude.json",
      "target": "/home/vscode/.claude.json",
      "type": "bind"
    },
    {
      "source": "${localEnv:HOME}/.claude-mem",
      "target": "/home/vscode/.claude-mem",
      "type": "bind"
    }
  ],
  "runArgs": [
    "--add-host=host.docker.internal:host-gateway"
  ],
  "remoteUser": "vscode",
  "remoteEnv": {
    "SSH_AUTH_SOCK": "/home/vscode/.1password/agent.sock",
    "OLLAMA_HOST": "http://host.docker.internal:50000"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "anthropic.claude-code",
        "bierner.markdown-mermaid",
        "ms-azuretools.vscode-docker",
        "shd101wyy.markdown-preview-enhanced"
      ]
    }
  },
  "onCreateCommand": "npm install -g tree-sitter-cli",
  "postCreateCommand": "node --version && pnpm --version && bun --version && gh --version && python3 --version && claude --version && gemini --version && docker --version && docker compose version && awf version && grepai version && tree-sitter --version && uv --version && rg --version && bat --version && fzf --version && jq --version && eza --version",
  "postStartCommand": "bash docker/devcontainer/start-watchers.sh",
  "shutdownAction": "stopContainer"
}

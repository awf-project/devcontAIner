{
  "name": "devcontAIner",
  "build": {
    "context": "..",
    "dockerfile": "../docker/devcontainer/Dockerfile"
  },
  "features": {
    "ghcr.io/devcontainers/features/docker-outside-of-docker:1": {
      "moby": false
    },
    "ghcr.io/devcontainers/features/node:1": { 
      "version": "25" 
    },
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/python:1": {},
    "ghcr.io/devcontainers-extra/features/bun:1": {},
    "ghcr.io/jungaretti/features/ripgrep:1": {},
    "ghcr.io/jsburckhardt/devcontainer-features/bat:1": {},
    "ghcr.io/jsburckhardt/devcontainer-features/uv:1": {},
    "ghcr.io/devcontainers-extra/features/fzf:1": {},
    "ghcr.io/eitsupi/devcontainer-features/jq-likes:2": {},
    "ghcr.io/devcontainers-extra/features/eza:1": {},
    "ghcr.io/awf-project/devcontainer-features/claude-code:1": {},
    "ghcr.io/stu-bell/devcontainer-features/gemini-cli:0": {},
    "ghcr.io/schlich/devcontainer-features/playwright:0": {}
  },
  "mounts": [
    {
      "source": "${localEnv:HOME}/.claude",
      "target": "/home/vscode/.claude",
      "type": "bind"
    },
    {
      "source": "${localEnv:HOME}/.gitconfig",
      "target": "/home/vscode/.gitconfig.host",
      "type": "bind",
      "consistency": "cached"
    },
    {
      "source": "${localEnv:HOME}/.ssh",
      "target": "/home/vscode/.ssh",
      "type": "bind",
      "consistency": "cached"
    },
    {
      "source": "${localEnv:HOME}/.1password/agent.sock",
      "target": "/home/vscode/.1password/agent.sock",
      "type": "bind"
    },
    {
      "source": "${localEnv:HOME}/.gemini",
      "target": "/home/vscode/.gemini",
      "type": "bind"
    },
    {
      "source": "${localEnv:HOME}/.claude.json",
      "target": "/home/vscode/.claude.json",
      "type": "bind"
    }
  ],
  "runArgs": [
    "--add-host=host.docker.internal:host-gateway"
  ],
  "remoteUser": "vscode",
  "remoteEnv": {
    "SSH_AUTH_SOCK": "/home/vscode/.1password/agent.sock",
    "OLLAMA_HOST": "http://host.docker.internal:50000"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "anthropic.claude-code",
        "bierner.markdown-mermaid",
        "bradlc.vscode-tailwindcss",
        "editorconfig.editorconfig",
        "humao.rest-client",
        "mikestead.dotenv",
        "ms-azuretools.vscode-docker",
        "shd101wyy.markdown-preview-enhanced"
      ]
    },
    "jetbrains": {
      "plugins": [
        "com.intellij.mermaid",
        "com.intellij.tailwindcss",
        "com.jetbrains.restClient",
        "Docker",
        "org.editorconfig.editorconfigjetbrains",
        "ru.adelf.idea.dotenv"
      ]
    }
  },
  "onCreateCommand": "bash docker/devcontainer/run-lifecycle.sh on-create",
  "postCreateCommand": "bash docker/devcontainer/run-lifecycle.sh post-create",
  "postStartCommand": "bash docker/devcontainer/run-lifecycle.sh post-start",
  "shutdownAction": "stopContainer"
}
